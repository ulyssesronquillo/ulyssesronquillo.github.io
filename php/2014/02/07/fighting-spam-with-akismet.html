<!DOCTYPE html>

<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>fighting spam with akismet | uly.me</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="fighting spam with akismet" />
<meta name="author" content="ulysses" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Akismet is a web service that detects spam. Akismet was originally created by Automattic, the company behind WordPress, to filter out spam comments on its own blogs. The use of Akismet has spread to other blogs and CMS engines. Akismet can also be implemented on other websites. There are a number of plugins and libraries available. Akismit also has an API." />
<meta property="og:description" content="Akismet is a web service that detects spam. Akismet was originally created by Automattic, the company behind WordPress, to filter out spam comments on its own blogs. The use of Akismet has spread to other blogs and CMS engines. Akismet can also be implemented on other websites. There are a number of plugins and libraries available. Akismit also has an API." />
<link rel="canonical" href="http://0.0.0.0:4000/php/2014/02/07/fighting-spam-with-akismet.html" />
<meta property="og:url" content="http://0.0.0.0:4000/php/2014/02/07/fighting-spam-with-akismet.html" />
<meta property="og:site_name" content="uly.me" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-02-07T04:55:06+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="fighting spam with akismet" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ulysses"},"dateModified":"2014-02-07T04:55:06+00:00","datePublished":"2014-02-07T04:55:06+00:00","description":"Akismet is a web service that detects spam. Akismet was originally created by Automattic, the company behind WordPress, to filter out spam comments on its own blogs. The use of Akismet has spread to other blogs and CMS engines. Akismet can also be implemented on other websites. There are a number of plugins and libraries available. Akismit also has an API.","headline":"fighting spam with akismet","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/php/2014/02/07/fighting-spam-with-akismet.html"},"url":"http://0.0.0.0:4000/php/2014/02/07/fighting-spam-with-akismet.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="uly.me" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper">
<a class="site-title" rel="author" href="/">uly.me</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
<a class="page-link" href="/about.html">about</a><a class="page-link" href="/docs.html">docs</a><a class="page-link" href="/read.html">read</a>
</div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">fighting spam with akismet</h1>
    <p class="post-meta"><time class="dt-published" datetime="2014-02-07T04:55:06+00:00" itemprop="datePublished">
        Feb 7, 2014
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">ulysses</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Akismet is a web service that detects spam. Akismet was originally created by Automattic, the company behind WordPress, to filter out spam comments on its own blogs. The use of Akismet has spread to other blogs and CMS engines. Akismet can also be implemented on other websites. There are a number of plugins and libraries available. Akismit also has an API.</p>

<p>Akismet is open-source and free for personal use. Akismet offers professional and enterprise plans for a modest fee. To start using Akismet on your website, you first need an Akismet key which you can get from WordPress.com. Just register. A key will be automatically generated for you. In addition, you also need to download the Akismet class library which you’ll need to include in your web projects.</p>

<p>How to use Akismet</p>

<p>In this example, we will use Akismet’s PHP class library. <a href="https://code.google.com/p/akismet-php4/downloads/list" target="_blank" rel="noopener noreferrer">Download</a>. So, let’s assume you have a comment form or a contact page on your website. When your form is submitted, Akismet will check if the comment is spam or not. The API accesses the Akismet servers and it will return either a yes or a no. Simple enough. How Akismet filters out the spam is not known. They say it’s in the “secret sauce.”</p>

<p>Our HTML Form</p>

<p>We will keep our form simple. We will use the post method. Our form will call itself after submission. We are taking the proper precautions to avoid cross-site scripting attacks, etc. by using the htmlspecialchars function and the $_SERVER[“PHP_SELF”] variable itself.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;form action="&lt;?php echo htmlspecialchars($_SERVER[" method="post" php_self=""&gt;
  Name: &lt;input name="name" type="text"&gt;&lt;/input&gt;
  Email: &lt;input name="email" type="text"&gt;&lt;/input&gt;
  URL: &lt;input name="url" type="text"&gt;&lt;/input&gt;
  Comment: &lt;textarea cols="80" name="comment" rows="5"&gt;&lt;/textarea&gt;
  &lt;input name="submit" type="submit" value="Submit"&gt;&lt;/input&gt;
&lt;/form&gt;
</code></pre></div></div>

<p>Our PHP Code</p>

<p>This is the PHP code that we can place at top of our page. The code will start a new session. It will check if the form is submitted. We will then create a new Akismet object and check if our comment data is spam or not. The Akismet class will contact the Akismet servers. It will determine if our comment is spam or not. If it is, it will mark it as spam. We can either ignore it or save it to the database. If it’s a good comment, we definitely need to keep it and mark it as good comment.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php // start a new session
session_start();

// our submitted values are sanitized
$author = addslashes(htmlspecialchars(strip_tags(trim($_POST['name']))));
$email = addslashes(htmlspecialchars(strip_tags(trim($_POST['email']))));
$url = addslashes(htmlspecialchars(strip_tags(trim($_POST['url']))));
$comment = addslashes(htmlspecialchars(strip_tags(trim($_POST['comment']))));

// Load array with comment data.
$data = array(
  'author' =?&gt; $author,
  'email' =&gt; $email,
  'website' =&gt; 'http://www.yourdomain.com/',
  'body' =&gt; $comment,
  'permalink' =&gt; 'http://www.yourdomain.com/path-to-your-comment-page',
);

// include Akismet class
include "akismet.class.php";

// check if the form was submitted
if(isset($_POST['submit'])) {
  // submitted
  // create a new object
  $akismet = new Akismet('http://www.yourdomain.com/', 'YOUR_WORDPRESS_API_KEY', $data);  

  if($akismet-&gt;errorsExist()) {
    echo "Oops! Problem connecting to the Akismet server!";
  } else {
    if($akismet-&gt;isSpam()) {
      echo "This is spam!";
      // mark comment as spam
      // option to either save to database or ignore
    } else {
      echo "This is good ham! Let's keep it!";
      // mark comment as good ham
      // definitely save the good comment to the database
    }
  }
}
?&gt;
</code></pre></div></div>

<p>Making a Correction</p>

<p>Occasionally, not very often, Akismet screws up, and marks a good comment as spam, and vice versa. We can tell Akismet, “Hey, what’s the matter! Please correct these comments!” We can correct Akismet by running these two methods.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Submit as Ham
$akismet-&gt;submitHam();

// Submit as Spam
$akismet-&gt;submitSpam();
</code></pre></div></div>

<p>That’s how how Akismet is implemented in a nutshell.</p>

  </div>
<a class="u-url" href="/php/2014/02/07/fighting-spam-with-akismet.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>
  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col-right">
        <p>copyright © 2012-2025</p>
      </div>
    </div>
    <div class="social-links">
<ul class="social-media-list"></ul>
</div>
  </div>
</footer>

</body>

</html>
